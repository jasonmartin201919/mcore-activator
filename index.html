<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>MCORE æˆæƒä¸­å¿ƒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0f172a; color: white; font-family: sans-serif; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); }
        .super-vip { background: linear-gradient(90deg, #ffd700, #fff, #ffd700); background-size: 200% auto; color: #000 !important; animation: shine 2s linear infinite; }
        @keyframes shine { to { background-position: 200% center; } }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

<div class="glass p-8 rounded-3xl w-full max-w-md shadow-2xl">
    <div class="text-center mb-8">
        <h1 class="text-2xl font-bold italic tracking-tighter">MCORE <span class="text-indigo-400">2.5</span></h1>
        <p class="text-gray-400 text-sm mt-1">è‡ªåŠ©æˆæƒä¸çŠ¶æ€æŸ¥è¯¢ç³»ç»Ÿ</p>
    </div>

    <div class="space-y-4">
        <input type="text" id="orderId" placeholder="è¯·è¾“å…¥é—²é±¼/å°çº¢ä¹¦è®¢å•å·" 
            class="w-full bg-slate-900 border border-slate-700 rounded-xl px-4 py-3 focus:ring-2 focus:ring-indigo-500 outline-none transition-all text-center font-mono">
        
        <button onclick="checkOrder()" id="mainBtn" class="w-full py-4 bg-indigo-600 hover:bg-indigo-500 rounded-xl font-bold transition-all shadow-lg shadow-indigo-500/20">
            ç«‹å³æŸ¥è¯¢ / é¢†å–
        </button>

        <div id="resultArea" class="hidden space-y-4 mt-6 p-4 bg-slate-800/50 rounded-2xl border border-slate-700">
            <div class="text-center">
                <p class="text-xs text-gray-400">æ‚¨çš„æ°¸ä¹…æ¿€æ´»ç </p>
                <div id="keyCode" class="text-lg font-mono font-bold text-indigo-300 my-2 select-all"></div>
                <div id="statusTag" class="inline-block px-2 py-1 rounded text-[10px] font-bold uppercase"></div>
            </div>
            
            <div id="infoBox" class="text-[11px] text-gray-400 border-t border-slate-700 pt-4 space-y-1">
                <p id="resetInfo"></p>
                <p id="dateInfo"></p>
            </div>

            <div id="unbindingGuide" class="hidden mt-4 p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg">
                <p class="text-[10px] text-amber-200 leading-relaxed">
                    ğŸ’¡ <b>å¦‚éœ€æ›´æ¢è®¾å¤‡ï¼š</b> è¯·å‘é€ç”³è¯·é‚®ä»¶è‡³ <span class="underline" id="supportEmail"></span>ã€‚æ ‡é¢˜æ ¼å¼ï¼š[è§£ç»‘ç”³è¯·] è®¢å•å·ã€‚
                </p>
            </div>
        </div>
    </div>
</div>

<script>
    const SUPER_CODE = "940715";

    async function checkOrder() {
        const orderId = document.getElementById('orderId').value.trim();
        const keyCode = document.getElementById('keyCode');
        const statusTag = document.getElementById('statusTag');
        const resultArea = document.getElementById('resultArea');

        if (orderId === SUPER_CODE) {
            keyCode.innerText = "MCORE-ADMIN-INFINITE-940715";
            keyCode.className = "text-lg font-mono font-bold my-2 select-all super-vip p-2 rounded";
            statusTag.innerText = "è¶…çº§æˆæƒ";
            statusTag.className = "bg-yellow-500 text-black px-2 py-1 rounded text-[10px]";
            resultArea.classList.remove('hidden');
            return;
        }

        if (orderId.length < 4) return alert("è¯·è¾“å…¥å®Œæ•´è®¢å•å·");

        try {
            // è·å–åŒæ­¥åçš„ pool.json (åŒ…å«å·²ä½¿ç”¨çš„ä¿¡æ¯ç”¨äºæŸ¥è¯¢)
            const res = await fetch(`pool.json?t=${Date.now()}`);
            const data = await res.json();
            const pool = data.pool || [];

            // è¿™é‡Œä½¿ç”¨ Hash ç®—æ³•ç¡®ä¿åŒä¸€ä¸ªè®¢å•å·æ°¸è¿œæŒ‡å‘åŒä¸€ä¸ªç 
            let hash = 0;
            for (let i = 0; i < orderId.length; i++) {
                hash = ((hash << 5) - hash) + orderId.charCodeAt(i);
            }
            const index = Math.abs(hash) % pool.length;
            const keyData = pool[index]; // å‡è®¾ pool.json é‡Œå­˜çš„æ˜¯å¯¹è±¡æ•°ç»„

            // å±•ç¤ºé€»è¾‘
            keyCode.innerText = keyData.code;
            statusTag.innerText = keyData.mid ? "å·²ç»‘å®šè®¾å¤‡" : "å¾…æ¿€æ´»";
            statusTag.className = keyData.mid ? "bg-red-500/20 text-red-400 border border-red-500/50 px-2 py-1 rounded text-[10px]" : "bg-green-500/20 text-green-400 border border-green-500/50 px-2 py-1 rounded text-[10px]";
            
            document.getElementById('resetInfo').innerText = `å‰©ä½™è§£ç»‘æœºä¼š: ${3 - (keyData.reset_history?.length || 0)} æ¬¡`;
            document.getElementById('dateInfo').innerText = `æ¿€æ´»æ—¥æœŸ: ${keyData.active_date || 'å°šæœªæ¿€æ´»'}`;
            document.getElementById('supportEmail').innerText = "your-email@example.com";
            
            if(keyData.mid) document.getElementById('unbindingGuide').classList.remove('hidden');
            resultArea.classList.remove('hidden');

        } catch (e) {
            alert("æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Œè¯·ç¨åå†è¯•");
        }
    }
</script>
</body>
</html>
